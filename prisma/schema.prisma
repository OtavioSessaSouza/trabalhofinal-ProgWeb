// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

// senha,
// e-mail

model Paciente {
  id                Int         @id @default(autoincrement())
  nome              String
  nascimento        DateTime
  cpf               String      @unique
  contato           String
  contatoEmergencia String
  respCasoMenor     String?
  prontuarioID      Int         @unique
  endereco          Endereco?
  prontuario        Avaliacao[]
  consulta          Consulta?
}

model Endereco {
  id          Int      @id @default(autoincrement())
  rua         String
  numero      Int
  complemento String
  bairro      String
  cidade      String
  estado      String
  pacienteID  Int      @unique
  paciente    Paciente @relation(fields: [pacienteID], references: [id])
}

model Profissional {
  id         Int        @id @default(autoincrement())
  nome       String
  nascimento DateTime
  cpf        String     @unique
  crp        String     @unique
  Avaliacao  Avaliacao?
  consulta   Consulta?
}

model Avaliacao {
  id             Int          @id @default(autoincrement())
  profissionalID Int          @unique
  profissional   Profissional @relation(fields: [profissionalID], references: [id])
  pacienteID     Int          @unique
  paciente       Paciente     @relation(fields: [pacienteID], references: [id])
  data           DateTime
  status         Boolean
  condicao       String
  perguntas      QA[]
}

model QA {
  id          Int        @id @default(autoincrement())
  pergunta    String
  resposta    String
  avaliacoes   Avaliacao[]
}

model Consulta {
  id             Int          @id @default(autoincrement())
  profissionalID Int          @unique
  profissional   Profissional @relation(fields: [profissionalID], references: [id])
  pacienteID     Int          @unique
  paciente       Paciente     @relation(fields: [pacienteID], references: [id])
  data           DateTime
  relatorio      String
}
